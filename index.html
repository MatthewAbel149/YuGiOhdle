<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guess the Character</title>
    <style>
        * {
            box-sizing: border-box;
        }

        html, body {
            font-family: sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background: #f5f5f5;
            background-attachment: fixed;
            background-image: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSynlnk_kuBO_U7_UAKNXTAUg3KN95UiQKF7A&s'); /*Background for site*/
            /*background-size: cover;*/
            background-position: center;
            /*background-repeat: no-repeat;*/
            background-attachment: fixed;
        }

        .game-container {
            width: 100%;
            max-width: 3000px; /* limits the max size on big screens */
            margin: 0 auto; /* center horizontally */
            padding: 20px;
            background: rgba(0, 0, 0, 0.7); /* or your preferred semi-transparent white */
            border-radius: 12px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
            box-sizing: border-box;
        }

        h1 {
            margin-top: 0;
            margin-bottom: 20px;
            color: white;
        }

        input {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
        }

        .dropdown {
            border: 1px solid #ccc;
            max-height: 250px;
            overflow-y: auto;
            overflow-x: hidden;
            min-width: fit-content;
            margin-bottom: 20px;
            text-align: left;
        }

        .entry {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
        }

            .entry:hover {
                background: #f0f0f0;
            }

            .entry img {
                width: 50px;
                height: 50px;
                border-radius: 6px;
                object-fit: cover;
            }

        .entry-details {
            font-size: 14px;
            color: #444;
        }

        .grid-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
            width: 100%;
        }

        /*Settings for player's previous guess display*/
        .guess-row {
            display: grid;
            grid-template-columns: repeat(var(--column-count), 1fr);
            gap: 10px;
            width: 100%;
        }

        .box.header {
            background-color: #ddd;
            color: #000;
            font-weight: bold;
        }

        .box,
        .header {
            display: flex;
            align-items: center; /* vertical center */
            justify-content: center; /* horizontal center */
            text-align: center;
        }

        .box, .portrait {
            padding: 0px;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
            color: white;
            overflow: hidden;
        }

        .portrait {
            grid-column: span 1;
        }

            .portrait img {
                width: 100px;
                height: 100px;
                border-radius: 0px;
                object-fit: cover;
            }

        .green {
            background-color: #4caf50;
        }

        .yellow {
            background-color: #fbc02d;
            color: #000;
        }

        .red {
            background-color: #f44336;
        }

        /*Settings for the suggestion boxes*/
        #suggestions {
            max-height: 300px;
            overflow-y: auto;
            overflow-x: auto;
            display: block;
            white-space: nowrap;
        }

            #suggestions .guess-row {
                display: grid;
                grid-template-columns: 60px 1fr 1fr 1.5fr 1fr 0.8fr;
                gap: 5px;
                align-items: center;
                background-color: #fafafa;
                cursor: pointer;
                transition: background 0.2s;
                min-width: fit-content;
                flex-shrink: 0;
                white-space: nowrap;
            }

                #suggestions .guess-row:hover {
                    background-color: #f0f0f0;
                }

            #suggestions .box {
                padding: 10px;
                text-align: center;
                color: #333;
                font-weight: normal;
                background: #fff;
                border-radius: 4px;
            }

            #suggestions .portrait img {
                width: 50px;
                height: 50px;
                object-fit: cover;
                border-radius: 4px;
            }
        /*Settings for the Selector panel*/
        .container {
            display: flex;
            height: 100vh;
            margin-left: 180px;
            overflow: hidden;
        }

        .set-selector {
            width: 180px;
            background: #222;
            padding: 10px;
            overflow-y: auto;
            position: fixed;
            top: 0;
            height: 100vh;
            left: 0;
            bottom: 0;
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .set-card {
            cursor: pointer;
            background: #333;
            border-radius: 8px;
            overflow: hidden;
            text-align: center;
            transition: transform 0.2s;
        }

            .set-card:hover {
                transform: scale(1.05);
            }

            .set-card img {
                width: 100%;
                height: 100px;
                object-fit: cover;
                display: block;
            }

            .set-card span {
                display: block;
                padding: 5px;
                color: white;
                font-size: 14px;
            }
            /*Settings for the results screen*/
        .result-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.85);
            color: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            text-align: center;
        }

            .result-screen img {
                width: 200px;
                height: auto;
                margin: 20px 0;
                border-radius: 8px;
                object-fit: cover;
                box-shadow: 0 0 12px #000;
            }

        #restartBtn {
            padding: 10px 20px;
            background: #4caf50;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            border-radius: 6px;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="set-selector">
            <div class="set-card" data-set="yugioh_dm">
                <img src="https://static0.gamerantimages.com/wordpress/wp-content/uploads/2022/07/Yugioh.jpg" alt="Yu-Gi-Oh!" />
                <span>Duel Monsters</span>
            </div>
            <div class="set-card" data-set="yugioh_gx">
                <img src="https://static.wikia.nocookie.net/dubbing9585/images/a/a1/Yugiohgx.jpg/revision/latest?cb=20190322043418" alt="Yu-Gi-Oh! GX" />
                <span>GX</span>
            </div>
            <div class="set-card" data-set="yugioh_5ds">
                <img src="https://m.media-amazon.com/images/S/pv-target-images/48ef0c5fb7d27d266a1cba503bebb1a96618b811339c6621965467b45979e241.jpg" alt="Yu-Gi-Oh! 5Ds" />
                <span>5Ds</span>
            </div>
            <div class="set-card" data-set="yugioh_zexal">
                <img src="https://de7i3bh7bgh0d.cloudfront.net/2016/11/02/20/55/04/30de93b6-e6a9-416e-86b9-387b63239f27/YuGiOhZexal.jpg" alt="Yu-Gi-Oh! Zexal" />
                <span>Zexal</span>
            </div>
        </div>

    </div>

    <div class="game-panel">
        <div class="game-container">

            <h1>Yu-Gi-Oh!dle</h1>
            <input type="text" id="searchInput" placeholder="Type a character name..." autocomplete="off" />
            <div id="suggestions" class="dropdown" style="display:none;">
                <div class="guess-row preview-entry">
                    <div class="portrait">
                        <img src="portrait-url.jpg" alt="Name" />
                    </div>
                    <div class="box"></div>
                </div>
            </div>
            <div class="grid-container">
                <div class="guess-row labels" style="display:none;">
                    <div class="box" style="background:#ddd; color:#000;"></div>
                </div>
                <div id="grid" class="grid-subcontainer"></div>
            </div>
        </div>
        <div id="resultScreen" class="result-screen" style="display: none;">
            <h2>You guessed correctly!</h2>
            <img id="resultImage" src="" alt="Character" />
            <p id="resultName"></p>
            <button id="restartBtn">Play Again</button>
        </div>
    </div>
    <script>
        const characterSets = {
            yugioh_dm : {
                attributes: ['image', 'name', 'gender', 'arc', 'height', 'weight', 'occupation', 'role'],
                characters: [
                    {
                        name: 'Yami Yugi',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '153',
                        weight: '42',
                        occupation: 'Spirit',
                        role: 'Protagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/a/a6/YamiYugiMD.png/revision/latest?cb=20190602124558'
                    },
                    {
                        name: 'Yugi Muto',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '153',
                        weight: '42',
                        occupation: 'Student',
                        role: 'Protagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/d/d1/YugiMuto-DULI.png/revision/latest?cb=20180331132907'
                    },
                    {
                        name: 'Seto Kaiba',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '186',
                        weight: '65',
                        occupation: 'Businessman',
                        role: 'Anti-Hero',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/2/23/SetoKaiba-DL.png/revision/latest?cb=20190614200609'
                    },
                    {
                        name: 'Maximillion Pegasus',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '188',
                        weight: '65',
                        occupation: 'Businessman',
                        role: 'Primary Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/a/a7/MaximillionPegasusMD.png/revision/latest/scale-to-width-down/1000?cb=20190602123323'
                    },
                    {
                        name: 'Joey Wheeler',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '178',
                        weight: '62',
                        occupation: 'Student',
                        role: 'Protagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/1/1f/JoeyWheeler-DULI.png/revision/latest?cb=20211007115529'
                    },
                    {
                        name: 'Yami Bakura',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '176',
                        weight: '52',
                        occupation: 'Spirit', 
                        role: 'Primary Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/a/ae/YamiBakura-DULI.png/revision/latest?cb=20170515095008'
                    },
                    {
                        name: 'Bakura Ryou',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '176',
                        weight: '52',
                        occupation: 'Student',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/e/ef/Ryo2.png/revision/latest?cb=20150425031740'
                    },
                    {
                        name: 'Solomon Muto',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '151',
                        weight: '62',
                        occupation: 'Businessman',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/3/3c/SolomonMutoMD.png/revision/latest?cb=20190602122922'
                    },
                    {
                        name: 'Mokuba Kaiba',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '142',
                        weight: '28',
                        occupation: 'Businessman',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/9/99/MokubaKaiba-DULI.png/revision/latest?cb=20171001200858'
                    },
                    {
                        name: 'Mai Valentine',
                        gender: 'Female',
                        arc: 'Duelist Kingdom',
                        height: '175',
                        weight: '52',
                        occupation: 'Pro Duelist, Minion',
                        role: 'Anti-Villain',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/d/dd/MaiValentineMD.png/revision/latest?cb=20190602124359'
                    },
                    {
                        name: 'Weevil Underwood',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '162',
                        weight: '51',
                        occupation: 'Pro Duelist, Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/0/0a/WeevilUnderwood-DULI.png/revision/latest?cb=20180331133014'
                    },
                    {
                        name: 'Rex Raptor',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '165',
                        weight: '52',
                        occupation: 'Pro Duelist, Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/3/3e/RexRaptor-DULI.png/revision/latest?cb=20180706092723'
                    },
                    {
                        name: 'Dartz',
                        gender: 'Male',
                        arc: 'Waking the Dragons',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Businessman',
                        role: 'Primary Antagonist',
                        image: 'https://ms.yugipedia.com//thumb/2/2e/Dartz-LOD.png/800px-Dartz-LOD.png'
                    },
                    {
                        name: 'Tristan Taylor',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '180',
                        weight: '65',
                        occupation: 'Student',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/6/6b/Tristan-TFSP.png/revision/latest?cb=20150622142834'
                    },
                    {
                        name: 'Mako Tsunami',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: '178',
                        weight: '68',
                        occupation: 'Pro Duelist',
                        role: 'Anti-villain',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/d/d2/MakoTsunamiMD.png/revision/latest?cb=20190602123708'
                    },
                    {
                        name: 'Shadi',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Spirit',
                        role: 'Other',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/c/cb/ShadiMD.png/revision/latest?cb=20190602124052'
                    },
                    {
                        name: 'Leon von Schroeder',
                        gender: 'Male',
                        arc: 'Grand Championship',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Businessman',
                        role: 'Anti-Villain',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/7/76/LeonWilson.png/revision/latest?cb=20160722123954'
                    },
                    {
                        name: 'Ziegfried von Schroeder',
                        gender: 'Male',
                        arc: 'Grand Championship',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Businessman',
                        role: 'Primary Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/c/ce/Schroederzigfried.png/revision/latest/scale-to-width-down/1000?cb=20160722123527'
                    },
                    {
                        name: 'Espa Roba',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: '172',
                        weight: '48',
                        occupation: 'None',
                        role: 'Anti-Villain',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/c/c8/EspaRoba-DULI.png/revision/latest/scale-to-width-down/1000?cb=20171121164121'
                    },
                    {
                        name: 'PaniK',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Pro Duelist, Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/9/9e/PaniK.png/revision/latest?cb=20131125144703'
                    },
                    {
                        name: 'Rafael',
                        gender: 'Male',
                        arc: 'Waking the Dragons',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Anti-Villain',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/c/cb/Rafael.png/revision/latest/scale-to-width-down/1000?cb=20190525154546'
                    },
                    {
                        name: 'Odion',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: '183',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Anti-Villain',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/6/6d/Odion-TFSP.png/revision/latest?cb=20150622192137'
                    },
                    {
                        name: 'Bandit Keith',
                        gender: 'Male',
                        arc: 'Duelist Kingsom',
                        height: '190',
                        weight: '85',
                        occupation: 'Pro Duelist, Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/4/40/BanditKeithMD.png/revision/latest?cb=20190602123207'
                    },
                    {
                        name: 'Noah Kaiba',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'None',
                        role: 'Primary Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/7/78/Noahvillainswiki.png/revision/latest?cb=20171231144007'
                    },
                    {
                        name: 'Gozaburo Kaiba',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Businessman',
                        role: 'Primary Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/d/d7/Gozaburo11.png/revision/latest?cb=20130927134501'
                    },
                    {
                        name: 'Marik Ishtar',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: '180',
                        weight: '55',
                        occupation: 'None',
                        role: 'Primary Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/3/37/MarikIshtar-DULI.png/revision/latest?cb=20180106234644'
                    },
                    {
                        name: 'Yami Marik',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: '180',
                        weight: '55',
                        occupation: 'Spirit',
                        role: 'Primary Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/f/f7/YamiMarik-DULI.png/revision/latest?cb=20170728075955'
                    },
                    {
                        name: 'Ishizu Ishtar',
                        gender: 'Female',
                        arc: 'Battle City',
                        height: '167',
                        weight: '43',
                        occupation: 'Businessman',
                        role: 'Protagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/2/2b/IshizuIshtarMD.png/revision/latest?cb=20190602124008'
                    },
                    {
                        name: 'Rebecca Hawkins',
                        gender: 'Female',
                        arc: 'Battle City',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'None',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/2/2f/RebeccaHawkinsMD.png/revision/latest?cb=20190602121454'
                    },
                    {
                        name: 'Arthur Hawkins',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Businessman',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/9/9d/Arthur-Hawkins1.jpg/revision/latest?cb=20230810181600'
                    },
                    {
                        name: 'Tea Gardner',
                        gender: 'Female',
                        arc: 'Duelist Kingdom',
                        height: '165',
                        weight: '47',
                        occupation: 'Student',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/e/e3/T%C3%A9aGardner-DULI.png/revision/latest?cb=20180331132758'
                    },
                    {
                        name: 'Duke Devlin',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: '179',
                        weight: '64',
                        occupation: 'Businessman',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/0/00/Duke-TFSP.png/revision/latest?cb=20150622144236'
                    },
                    {
                        name: 'Valon',
                        gender: 'Male',
                        arc: 'Waking the Dragons',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Anti-Hero',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/6/6d/Valon.png/revision/latest?cb=20190531105548'
                    },
                    {
                        name: 'Serenity Wheeler',
                        gender: 'Female',
                        arc: 'Duelist Kingdom',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'None',
                        role: 'Family/Friend',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/8/8b/Serenity.png/revision/latest?cb=20170307114636'
                    },
                    {
                        name: 'Alister',
                        gender: 'Male',
                        arc: 'Waking the Dragons',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/5/5a/Alister.png/revision/latest?cb=20190531112647'
                    },
                    {
                        name: 'Vivian Wong',
                        gender: 'Female',
                        arc: 'Grand Tournament',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Pro Duelist',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/5/57/VivianWong.png/revision/latest/scale-to-width-down/1000?cb=20160722123836'
                    },
                    {
                        name: 'Umbra',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/7/7c/Umbra3.png/revision/latest?cb=20131202163919'
                    },
                    {
                        name: 'Lumis',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/6/6f/Lumis3.png/revision/latest/scale-to-width-down/1000?cb=20150408015623'
                    },
                    {
                        name: 'Arkana',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Businessman, Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/0/00/Arkana-DULI.png/revision/latest?cb=20170720113617'
                    },
                    {
                        name: 'Bonz',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/f/fe/Bonz-LOD.png/revision/latest?cb=20210203003405'
                    },
                    {
                        name: 'Strings',
                        gender: 'Male',
                        arc: 'Battle City',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/f/f0/Strings-DULI.png/revision/latest?cb=20171228102429'
                    },
                    {
                        name: 'Gurimo',
                        gender: 'Male',
                        arc: 'Waking the Dragons',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/3/33/Gurimo3.png/revision/latest?cb=20131203150054'
                    },
                    {
                        name: 'Para',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Pro Duelist, Minion',
                        role: 'Antagonist',
                        image: 'https://static.wikia.nocookie.net/yugioh/images/0/02/Para-TFSP.png/revision/latest?cb=20150622192652'
                    },
                    {
                        name: 'Dox',
                        gender: 'Male',
                        arc: 'Duelist Kingdom',
                        height: 'Unknown',
                        weight: 'Unknown',
                        occupation: 'Pro Duelist, Minion',
                        role: 'Antagonist',
                        image: ''
                    },
                ]
            },
            yugioh_gx: {
                attributes: ['name','gender', 'height', 'occupation', 'dorm'],
                characters: [
                    {
                        name: 'Jaden Yuki',
                        gender: 'Male',
                        height: 165.7,
                        occupation: 'Student',
                        Dorm: 'Slifer Red',
                        image: 'https://uploads2.yugioh.com/character/24/detail/list/jaden-m.png?1371840762'
                    },
                    {
                        name: '',
                        gender: '',
                        height: 0,
                        occupation: '',
                        dorm: '',
                        image: ''
                    },
                ],
            },
            yugioh_5ds: {
                attributes: ['name'],
                characters:
                    [
                        {
                            name: 'Yusei Fudo',
                            series: '5Ds',
                            age: '18',
                            height: 175,
                            victories: 52,
                            image: 'https://uploads2.yugioh.com/character/31/detail/list/yusei-m.png?1371843969'
                        },
                    ]
            },
            yugioh_zexal: [
                { name: 'Matt' },
                { name: 'Leo' }
            ]
        };
        let characters = [];
        let mysteryCharacter = null;
        let activeAttributes = [];
        const guessedCharacters = new Set();
        let gameOver = false;

        const searchInput = document.getElementById('searchInput');
        const suggestionsBox = document.getElementById('suggestions');
        const gridContainer = document.getElementById('grid');

        /*Detect set selection*/
        document.querySelectorAll('.set-card').forEach(card => {
            card.addEventListener('click', () => {
                const selectedSet = card.dataset.set;
                if (!selectedSet || !characterSets[selectedSet]) return;

                const set = characterSets[selectedSet];
                characters = set.characters;
                activeAttributes = set.attributes;
                mysteryCharacter = characters[Math.floor(Math.random() * characters.length)];

                guessedCharacters.clear();
                gameOver = false;
                searchInput.value = '';
                searchInput.disabled = false;
                gridContainer.innerHTML = '';

                renderHeaderRow();
            });
        });
        /*Detect restart*/
        document.getElementById('restartBtn').addEventListener('click', () => {
            // Pick a new character from the current set
            mysteryCharacter = characters[Math.floor(Math.random() * characters.length)];

            // Reset game state
            guessedCharacters.clear();
            gameOver = false;
            searchInput.value = '';
            searchInput.disabled = false;
            suggestionsBox.innerHTML = '';
            gridContainer.innerHTML = '';

            renderHeaderRow();
            document.getElementById('resultScreen').style.display = 'none';
        });

        function renderHeaderRow() {
            gridContainer.innerHTML = ''; // Clear previous header
            gridContainer.style.setProperty('--column-count', activeAttributes.length);

            const header = document.createElement('div');
            header.className = 'guess-row labels';

            activeAttributes.forEach(attr => {

                const box = document.createElement('div');
                box.className = 'box header';
                box.textContent = attr === 'image' ? '' : attr.charAt(0).toUpperCase() + attr.slice(1);
                header.appendChild(box);
            });

            gridContainer.appendChild(header);
        }

        function getAttributeFeedback(guessValue, answerValue) {
            // Numeric comparison
            if (!isNaN(guessValue) && !isNaN(answerValue)) {
                if (Number(guessValue) === Number(answerValue)) return { color: 'green', arrow: '' };
                return {
                    color: 'red',
                    arrow: Number(guessValue) < Number(answerValue) ? ' ▲' : ' ▼'
                };
            }

            // Exact match (case-insensitive string)
            if (guessValue.toLowerCase?.() === answerValue.toLowerCase?.()) {
                return { color: 'green', arrow: '' };
            }

            // Partial match (for comma-separated string values)
            const guessSet = new Set(guessValue.toLowerCase().split(',').map(s => s.trim()));
            const answerSet = new Set(answerValue.toLowerCase().split(',').map(s => s.trim()));
            const overlap = [...guessSet].filter(val => answerSet.has(val));

            return {
                color: overlap.length > 0 ? 'yellow' : 'red',
                arrow: ''
            };
        }

        function addGuessRow(char) {
            const row = document.createElement('div');
            row.className = 'guess-row';

            activeAttributes.forEach(attr => {
                const box = document.createElement('div');
                const { color, arrow } = getAttributeFeedback(char[attr], mysteryCharacter[attr]);
                if (attr === 'image') {
                    box.className = 'portrait';
                    box.innerHTML = `<img src="${char[attr]}" alt="${char.name}" />`;
                } else {
                    box.className = `box ${color}`;
                    box.textContent = char[attr] + arrow;
                }
                row.appendChild(box);
            });

            gridContainer.appendChild(row);
        }

        function handleGuess(char) {
            if (gameOver) return;
            guessedCharacters.add(char.name);

            addGuessRow(char);

            if (char.name === mysteryCharacter.name) {
                gameOver = true;

                // Show result screen
                const resultScreen = document.getElementById('resultScreen');
                const resultImage = document.getElementById('resultImage');
                const resultName = document.getElementById('resultName');

                resultImage.src = char.image;
                resultName.textContent = char.name;
                resultScreen.style.display = 'flex';
            }
        }

        function showSuggestions(value) {
            const matches = characters.filter(c =>
                c.name.toLowerCase().includes(value.toLowerCase()) &&
                !guessedCharacters.has(c.name)
            );

            suggestionsBox.innerHTML = '';
            if (matches.length === 0 || value.trim() === '') {
                suggestionsBox.style.display = 'none';
                return;
            }

            matches.forEach(char => {
                const div = document.createElement('div');
                div.className = 'guess-row preview-entry';

                activeAttributes.forEach(attr => {
                    const box = document.createElement('div');
                    if (attr === 'image') {
                        box.className = 'portrait';
                        box.innerHTML = `<img src="${char[attr]}" alt="${char.name}" />`;
                    } else {
                        box.className = 'box';
                        box.textContent = char[attr] || '—';
                    }

                    div.appendChild(box);
                });

                div.addEventListener('click', () => {
                    searchInput.value = '';
                    suggestionsBox.style.display = 'none';
                    handleGuess(char);
                });

                suggestionsBox.appendChild(div);
            });

            suggestionsBox.style.display = 'block';
        }

        searchInput.addEventListener('input', e => {
            showSuggestions(e.target.value);
        });

        document.addEventListener('click', e => {
            if (!suggestionsBox.contains(e.target) && e.target !== searchInput) {
                suggestionsBox.style.display = 'none';
            }
        });
    </script>

</body>
</html>